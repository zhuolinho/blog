window.__require=function e(t,i,o){function n(s,c){if(!i[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var h="function"==typeof __require&&__require;if(!c&&h)return h(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+s+"'")}}var d=i[s]={exports:{}};t[s][0].call(d.exports,function(e){return n(t[s][1][e]||e)},d,d.exports,e,t,i,o)}return i[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<o.length;s++)n(o[s]);return n}({Bird:[function(e,t,i){"use strict";cc._RF.push(t,"273baYj5nZF96xONv7M6SF5","Bird"),cc.Class({extends:cc.Component,properties:{moveSpeed:1.2,animation:"am_penican",birdAudio:{default:null,type:cc.AudioClip}},onLoad:function(){this.moveAction=this.setMoveAction(),this.node.runAction(this.moveAction),this.moving=!0;var e=this.getComponent(cc.Animation).play(this.animation);e.speed=.25,e.repeatCount=1/0,cc.audioEngine.playEffect(this.birdAudio,!1)},setMoveAction:function(){return cc.moveBy(cc.winSize.width/this.moveSpeed/150,cc.v2(2*-this.node.position.x,0))},onCollisionEnter:function(e,t){this.game.gameOver()},update:function(e){this.moveAction.isDone()&&this.moving&&(this.moving=!1,this.game.birdStoped(this),this.node.destroy())}}),cc._RF.pop()},{}],HeroControl:[function(e,t,i){"use strict";cc._RF.push(t,"339d2dg1QpEKKxBJBzHiDJ0","HeroControl"),cc.Class({extends:cc.Component,properties:{speed:cc.v2(0,0),maxSpeed:cc.v2(2e3,2e3),gravity:-1e3,drag:1e3,direction:0,jumpSpeed:300,scoreLabel:{default:null,type:cc.Label},stop1Sprite:{default:null,type:cc.Sprite},stop2Sprite:{default:null,type:cc.Sprite},jumpAudio:{default:null,type:cc.AudioClip}},onLoad:function(){var e=cc.Canvas.instance.node;e.on("touchstart",this.onTouchStart,this),e.on("touchend",this.onTouchEnd,this),this.collisionX=0,this.collisionY=0,this.prePosition=cc.v2(),this.preStep=cc.v2(),this.touchingNumber=0,this.playIdleAnimation()},onEnable:function(){cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!1},onDisable:function(){cc.director.getCollisionManager().enabled=!1,cc.director.getCollisionManager().enabledDebugDraw=!1},playIdleAnimation:function(){var e=this.getComponent(cc.Animation).play("am_fish_stay");e.speed=.3,e.repeatCount=1/0},onTouchStart:function(e){if(!this.jumping&&!this.gameover){this.jumping=!0,this.speed.y=this.jumpSpeed;var t=this.getComponent(cc.Animation).play("am_fish_jump");t.speed=.4,t.onStop=this.playIdleAnimation.bind(this),cc.audioEngine.playEffect(this.jumpAudio,!1)}},onTouchEnd:function(e){this.direction=0,this.game.gameOn||this.gameover||(this.game.gameOn=!0,this.game.addBlock(),this.game.startTimer())},onCollisionEnter:function(e,t){this.touchingNumber++;var i=e.world.aabb,o=e.world.preAabb.clone(),n=t.world.aabb,a=t.world.preAabb.clone();if(a.x=n.x,o.x=i.x,cc.Intersection.rectRect(a,o))return this.speed.x<0&&a.xMax>o.xMax?(this.node.x=o.xMax-this.node.parent.x,this.collisionX=-1):this.speed.x>0&&a.xMin<o.xMin&&(this.node.x=o.xMin-a.width-this.node.parent.x,this.collisionX=1),this.speed.x=0,void(e.touchingX=!0);(a.y=n.y,o.y=i.y,cc.Intersection.rectRect(a,o))&&(this.speed.y<0&&a.yMax>o.yMax?(this.node.y=o.yMax-this.node.parent.y,this.jumping=!1,this.collisionY=-1):this.speed.y>0&&a.yMin<o.yMin&&(this.node.y=o.yMin-a.height-this.node.parent.y,this.collisionY=1),this.speed.y=0,e.touchingY=!0,Math.random()>.5?this.stop1Sprite.getComponent(cc.Animation).play("ae_stop1").speed=.8:this.stop2Sprite.getComponent(cc.Animation).play("ae_stop2").speed=.6)},onCollisionStay:function(e,t){if(-1===this.collisionY&&"Platform"===e.node.group)e.node.getComponent("PlatformMotion")},onCollisionExit:function(e){this.touchingNumber--,0===this.touchingNumber&&(this.node.color=cc.Color.WHITE),e.touchingX?(this.collisionX=0,e.touchingX=!1):e.touchingY&&(e.touchingY=!1,this.collisionY=0,this.jumping=!0)},update:function(e){0===this.collisionY&&(this.speed.y+=this.gravity*e,Math.abs(this.speed.y)>this.maxSpeed.y&&(this.speed.y=this.speed.y>0?this.maxSpeed.y:-this.maxSpeed.y)),0===this.direction?this.speed.x>0?(this.speed.x-=this.drag*e,this.speed.x<=0&&(this.speed.x=0)):this.speed.x<0&&(this.speed.x+=this.drag*e,this.speed.x>=0&&(this.speed.x=0)):(this.speed.x+=(this.direction>0?1:-1)*this.drag*e,Math.abs(this.speed.x)>this.maxSpeed.x&&(this.speed.x=this.speed.x>0?this.maxSpeed.x:-this.maxSpeed.x)),this.speed.x*this.collisionX>0&&(this.speed.x=0),this.prePosition.x=this.node.x,this.prePosition.y=this.node.y,this.preStep.x=this.speed.x*e,this.preStep.y=this.speed.y*e,this.node.x+=this.speed.x*e,this.node.y+=this.speed.y*e,this.scoreLabel.node.y=this.node.y+100,this.stop1Sprite.node.y=this.node.y+45,this.stop2Sprite.node.y=this.node.y+25}}),cc._RF.pop()},{}],PlatformMotion:[function(e,t,i){"use strict";cc._RF.push(t,"0f761EZmKhNLKJpUXTrb4fF","PlatformMotion"),cc.Class({extends:cc.Component,properties:{moveSpeed:0,type:0,blackcat:{default:null,type:cc.SpriteFrame},licat:{default:null,type:cc.SpriteFrame},nainiucat:{default:null,type:cc.SpriteFrame},sanhuacat:{default:null,type:cc.SpriteFrame},oracat:{default:null,type:cc.SpriteFrame},eatSprite:{default:null,type:cc.Sprite},cat1Audio:{default:null,type:cc.AudioClip},cat2Audio:{default:null,type:cc.AudioClip}},onLoad:function(){this.moveAction=this.setMoveAction(),this.node.runAction(this.moveAction),this.moving=!0;var e=this.node.getComponent(cc.Sprite);switch(this.type){case 4:e.spriteFrame=this.blackcat;break;case 3:e.spriteFrame=this.licat;break;case 2:e.spriteFrame=this.nainiucat;break;case 1:e.spriteFrame=this.sanhuacat;break;default:e.spriteFrame=this.oracat}Math.random()<.5?cc.audioEngine.playEffect(this.cat1Audio,!1):cc.audioEngine.playEffect(this.cat2Audio,!1)},setMoveAction:function(){return cc.moveBy(cc.winSize.width/this.moveSpeed/300,cc.v2(-this.node.position.x,0))},onCollisionStay:function(e,t){t.touchingX&&this.moving&&(this.eatSprite.getComponent(cc.Animation).play("am_fish_limaoate").speed=1,this.game.gameOver());t.touchingY&&this.moving&&this.stopBlock()},update:function(e){this.moveAction.isDone()&&this.moving&&this.stopBlock()},stopBlock:function(){this.node.stopAllActions(),this.moving=!1,this.game.blockStoped(this);var e=this.getComponent(cc.Animation),t=void 0;switch(this.type){case 4:t="am_blackcat";break;case 3:t="am_licat";break;case 2:t="am_nainiucat";break;case 1:t="am_sanhuacat";break;default:t="am_oracat"}e.play(t).speed=.3}}),cc._RF.pop()},{}],Wall:[function(e,t,i){"use strict";cc._RF.push(t,"1a279oXNoxFFI516fswAbVo","Wall");var o=cc.Enum({Left:0,Right:1,Top:2,Bottom:3});cc.Class({extends:cc.Component,properties:{type:{default:o.Left,type:o},width:5},start:function(){var e=this.getComponent(cc.BoxCollider);if(e){var t=this.node,i=this.type,n=cc.winSize.width,a=cc.winSize.height,s=this.width;i===o.Left?(t.height=a,t.width=s,t.x=0,t.y=a/2):i===o.Right?(t.height=a,t.width=s,t.x=n,t.y=a/2):i===o.Top?(t.width=n,t.height=s,t.x=n/2,t.y=a):i===o.Bottom&&(t.width=n,t.height=s,t.x=0,t.y=0),e.size=t.getContentSize()}}}),cc._RF.pop()},{}],blockSpeed:[function(e,t,i){"use strict";cc._RF.push(t,"97bd2VtYjxOXpAlxWMb4ASm","blockSpeed"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){var t={};switch(!0){case e>=1050:t={no:46,min:1.6,max:2.8};break;case e>=1020:t={no:45,min:1.6,max:2.7};break;case e>=990:t={no:44,min:1.6,max:2.6};break;case e>=960:t={no:43,min:1.6,max:2.5};break;case e>=930:t={no:42,min:1.6,max:2.4};break;case e>=900:t={no:41,min:1.6,max:2.3};break;case e>=870:t={no:40,min:1.6,max:2.2};break;case e>=840:t={no:39,min:1.6,max:2.1};break;case e>=810:t={no:38,min:1.6,max:2};break;case e>=780:t={no:37,min:1.6,max:1.9};break;case e>=750:t={no:36,min:1.6,max:1.8};break;case e>=720:t={no:35,min:1.6,max:1.7};break;case e>=690:t={no:34,min:1.5,max:2.2};break;case e>=660:t={no:33,min:1.5,max:2.1};break;case e>=630:t={no:32,min:1.5,max:2};break;case e>=600:t={no:31,min:1.5,max:1.9};break;case e>=570:t={no:30,min:1.5,max:1.8};break;case e>=540:t={no:29,min:1.5,max:1.7};break;case e>=510:t={no:28,min:1.5,max:1.6};break;case e>=480:t={no:27,min:1.4,max:2};break;case e>=450:t={no:26,min:1.4,max:1.9};break;case e>=420:t={no:25,min:1.4,max:1.8};break;case e>=390:t={no:24,min:1.4,max:1.7};break;case e>=360:t={no:23,min:1.4,max:1.6};break;case e>=330:t={no:22,min:1.4,max:2};break;case e>=305:t={no:21,min:1.4,max:1.9};break;case e>=280:t={no:20,min:1.4,max:1.8};break;case e>=255:t={no:19,min:1.4,max:1.7};break;case e>=230:t={no:18,min:1.4,max:1.6};break;case e>=205:t={no:17,min:1.3,max:2};break;case e>=185:t={no:16,min:1.3,max:1.9};break;case e>=165:t={no:15,min:1.3,max:1.8};break;case e>=150:t={no:14,min:1.3,max:1.7};break;case e>=135:t={no:13,min:1.3,max:1.6};break;case e>=120:t={no:12,min:1.2,max:1.6};break;case e>=100:t={no:11,min:1.2,max:1.5};break;case e>=80:t={no:10,min:1.2,max:1.4};break;case e>=70:t={no:9,min:1.1,max:1.3};break;case e>=60:t={no:8,min:1,max:1.2};break;case e>=50:t={no:7,min:.8,max:1};break;case e>=40:t={no:6,min:.8,max:1};break;case e>=30:t={no:5,min:.7,max:.9};break;case e>=20:t={no:4,min:.6,max:.8};break;case e>=12:t={no:3,min:.5,max:.8};break;case e>=5:t={no:2,min:.4,max:.5};break;default:t={no:1,min:.3,max:.4}}return t},t.exports=i.default,cc._RF.pop()},{}],follow:[function(e,t,i){"use strict";cc._RF.push(t,"d96400vNFFPIpzg48kPuXVc","follow");var o=function(e){return e&&e.__esModule?e:{default:e}}(e("./blockSpeed"));cc.Class({extends:cc.Component,properties:{target:{default:null,type:cc.Node},blockPrefab:{default:null,type:cc.Prefab},birdPrefab:{default:null,type:cc.Prefab},seagullPrefab:{default:null,type:cc.Prefab},scoreDisplay:{default:null,type:cc.Label},scoreLabel:{default:null,type:cc.Label},gameoverSprite:{default:null,type:cc.Sprite},hp:1,bgAudio:{default:null,type:cc.AudioClip},doubleAudio:{default:null,type:cc.AudioClip},highAudio:{default:null,type:cc.AudioClip},gameoverAudio:{default:null,type:cc.AudioClip},idleAudio:{default:null,type:cc.AudioClip}},onLoad:function(){if(this.level=0,this.gameOn=!1,this.score=0,this.target){var e=cc.follow(this.target,cc.rect(-500,-10,1e3,1/0));this.node.runAction(e),this.target.getComponent("HeroControl").game=this,this.timer=1,cc.audioEngine.playMusic(this.bgAudio,!0)}},startTimer:function(){this.schedule(function(){this.timer++,this.timer%10==0&&cc.audioEngine.playEffect(this.idleAudio,!1)},1)},addBlock:function(){var e=cc.instantiate(this.blockPrefab),t=Math.random()<.5?-1:1,i=e.getComponent("PlatformMotion");e.setPosition(this.getNewStarPosition(t,!0)),i.type=Math.floor(Math.random()/.2),i.game=this;var n=(0,o.default)(this.timer),a=n.min,s=n.max;i.moveSpeed=Math.random()*(s-a)+a,e.scaleX=t,this.lastBlock=e,this.node.addChild(e)},addBird:function(e){var t=cc.instantiate(e),i=Math.random()<.5?-1:1;t.setPosition(this.getNewStarPosition(i,!1)),t.getComponent("Bird").game=this,t.scaleX=i,this.node.addChild(t)},getNewStarPosition:function(e,t){var i=this.blockPrefab.data.width,o=(cc.winSize.width+i)*e/2,n=20+40*this.level+2.5;return t&&this.level++,cc.v2(o,n)},blockStoped:function(e){this.gameOn&&(Math.abs(this.lastX-e.node.x)<1?(this.addScore(2),cc.audioEngine.playEffect(this.doubleAudio,!1)):this.addScore(1),this.lastX=e.node.x,this.addComponent())},birdStoped:function(e){this.gameOn&&(this.addScore(3),this.addComponent())},addScore:function(e){var t=this;this.score+=e,this.score%100==0&&cc.audioEngine.playEffect(this.highAudio,!1),this.scoreLabel.string="+"+e,setTimeout(function(){t.scoreLabel.string=""},700),this.scoreDisplay.string=this.score},addComponent:function(){var e=0,t=0;switch(!0){case this.timer>=70:e=.5;case this.timer>=40:t=.3}var i=Math.random();i>e+t?this.addBlock():i>e?this.addBird(this.seagullPrefab):this.addBird(this.birdPrefab)},gameOver:function(){(this.hp--,this.hp<1&&this.gameOn)&&(cc.audioEngine.playEffect(this.gameoverAudio,!1),this.target.opacity=0,this.gameoverSprite.getComponent(cc.Animation).play("am_fish_ate"),this.gameOn=!1,this.target.getComponent("HeroControl").gameover=!0)}}),cc._RF.pop()},{"./blockSpeed":"blockSpeed"}]},{},["Bird","HeroControl","blockSpeed","follow","PlatformMotion","Wall"]);